{% extends "emails/base_email.html" %}
{% load i18n %}

{% block title %}{% trans "Purchase Receipt" %} - Xanula{% endblock %}

{% block content %}
<!-- Success Icon -->
<div style="text-align: center; margin-bottom: 24px;">
    <div style="width: 64px; height: 64px; background: rgba(45, 71, 57, 0.1); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;">
        <span style="font-size: 32px;">âœ“</span>
    </div>
</div>

<h1 style="text-align: center;">{% trans "Thank you for your purchase!" %}</h1>
<p style="text-align: center; color: #666666;">{% trans "Your book is now available in your library." %}</p>

<!-- Book Card -->
<div class="book-card">
    <table cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td style="vertical-align: top; padding-right: 20px; width: 80px;">
                {% if book.cover_image %}
                <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="book-cover">
                {% else %}
                <div style="width: 80px; height: 120px; background: linear-gradient(135deg, #8B2635, #2D4739); border-radius: 8px;"></div>
                {% endif %}
            </td>
            <td style="vertical-align: top;">
                <h3 class="book-title">{{ book.title }}</h3>
                <p class="book-author">{% trans "by" %} {{ book.author.get_display_name }}</p>
                <div style="margin-top: 12px;">
                    <span class="badge badge-success">ðŸ“– {% trans "Ebook" %}</span>
                    {% if book.has_audiobook %}
                    <span class="badge badge-success" style="margin-left: 6px;">ðŸŽ§ {% trans "Audiobook" %}</span>
                    {% endif %}
                </div>
            </td>
        </tr>
    </table>
</div>

<!-- Purchase Details -->
<h2>{% trans "Purchase Details" %}</h2>

<table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 24px;">
    <tr>
        <td style="padding: 12px 0; border-bottom: 1px solid #E8E4DC;">
            <span style="color: #666666; font-size: 14px;">{% trans "Purchase Date" %}</span>
        </td>
        <td style="padding: 12px 0; border-bottom: 1px solid #E8E4DC; text-align: right;">
            <span style="color: #1a1a1a; font-size: 14px;">{{ purchase.purchase_date|date:"F j, Y" }}</span>
        </td>
    </tr>
    <tr>
        <td style="padding: 12px 0; border-bottom: 1px solid #E8E4DC;">
            <span style="color: #666666; font-size: 14px;">{% trans "Payment Method" %}</span>
        </td>
        <td style="padding: 12px 0; border-bottom: 1px solid #E8E4DC; text-align: right;">
            <span style="color: #1a1a1a; font-size: 14px;">{{ purchase.get_payment_method_display }}</span>
        </td>
    </tr>
    <tr>
        <td style="padding: 12px 0; border-bottom: 1px solid #E8E4DC;">
            <span style="color: #666666; font-size: 14px;">{% trans "Transaction ID" %}</span>
        </td>
        <td style="padding: 12px 0; border-bottom: 1px solid #E8E4DC; text-align: right;">
            <span style="color: #1a1a1a; font-size: 12px; font-family: monospace;">{{ purchase.payment_transaction_id|truncatechars:20 }}</span>
        </td>
    </tr>
    <tr>
        <td style="padding: 16px 0;">
            <span style="color: #1a1a1a; font-size: 16px; font-weight: bold;">{% trans "Total Paid" %}</span>
        </td>
        <td style="padding: 16px 0; text-align: right;">
            <span style="color: #2D4739; font-size: 24px; font-weight: bold;">
                {% if purchase.amount_paid == 0 %}{% trans "Free" %}{% else %}{{ purchase.amount_paid|floatformat:0 }} XAF{% endif %}
            </span>
        </td>
    </tr>
</table>

<!-- CTA -->
<div style="text-align: center; margin-top: 32px;">
    <a href="{{ site_url|default:'https://xanula.com' }}/library/" class="btn">
        ðŸ“š {% trans "Access Your Library" %}
    </a>
</div>

<div class="divider"></div>

<p style="font-size: 13px; color: #888888; text-align: center;">
    {% trans "Questions about your purchase? Contact us at" %} <a href="mailto:reepls.project@gmail.com">reepls.project@gmail.com</a>
</p>
{% endblock %}
