{% extends "base.html" %}
{% load static %}

{% block title %}Xanula - African Literature Marketplace{% endblock %}

{% block content %}
<!-- Hero Section with Featured Book -->
<section class="relative -mt-6 md:-mt-16 overflow-hidden">
    <!-- Background Gradient -->
    <div class="absolute inset-0 bg-gradient-to-b from-burgundy-500/10 via-paper to-paper dark:from-burgundy-900/20 dark:via-dark-200 dark:to-dark-200"></div>
    
    <div class="container relative z-10 pt-8 pb-12 md:pt-20 md:pb-24">
        <div class="text-center max-w-3xl mx-auto mb-12">
            <h1 class="font-display text-3xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-4 leading-tight">
                Discover Stories from
                <span class="text-burgundy-500">Africa</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-600 dark:text-gray-300 max-w-xl mx-auto">
                Read, listen, and explore books from African voices. 
                Every story deserves to be heard.
            </p>
        </div>
        
        <!-- Search Bar -->
        <form action="{% url 'core:search' %}" method="get" class="max-w-xl mx-auto mb-12">
            <div class="relative">
                <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/>
                </svg>
                <input type="text" name="q" 
                    placeholder="Search books, authors, genres..." 
                    class="input input-lg pl-12 pr-28 shadow-lg border-0 bg-white dark:bg-dark-100">
                <button type="submit" class="btn btn-primary absolute right-2 top-1/2 -translate-y-1/2">
                    Search
                </button>
            </div>
        </form>
        
        <!-- Quick Categories -->
        <div class="flex flex-wrap justify-center gap-2 md:gap-3">
            {% for category in categories|slice:":6" %}
            <a href="{% url 'core:category_books' category_slug=category.slug %}" 
                class="px-4 py-2 bg-white dark:bg-dark-100 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-full border border-gray-200 dark:border-gray-700 hover:border-burgundy-500 hover:text-burgundy-500 dark:hover:text-burgundy-400 transition-colors shadow-sm">
                {{ category.name }}
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Books - Large Cards -->
{% if featured_books %}
<section class="py-10 md:py-16">
    <div class="container">
        <div class="flex items-center justify-between mb-6 md:mb-8">
            <h2 class="font-display text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">
                Featured Books
            </h2>
            <a href="{% url 'core:book_list' %}" class="text-burgundy-500 hover:text-burgundy-600 font-medium text-sm flex items-center gap-1">
                See all
                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
            </a>
        </div>
        
        <!-- Horizontal Scroll on Mobile -->
        <div class="flex gap-4 overflow-x-auto pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:grid md:grid-cols-3 lg:grid-cols-6 md:overflow-visible scrollbar-hide">
            {% for book in featured_books %}
            <a href="{% url 'core:book_detail' slug=book.slug %}" 
                class="book-card flex-shrink-0 w-36 md:w-auto shadow-md">
                <!-- Cover -->
                <div class="book-cover-wrapper">
                    {% if book.cover_image %}
                    <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" loading="lazy" class="book-cover">
                    {% else %}
                    <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-burgundy-500 to-forest-500">
                        <span class="text-3xl font-display font-bold text-white/40">{{ book.title|first }}</span>
                    </div>
                    {% endif %}
                    
                    <!-- Format Tags -->
                    <div class="absolute top-2 right-2 flex flex-col gap-1">
                        {% if book.has_ebook %}
                        <span class="px-2 py-0.5 text-xs font-medium bg-white/90 dark:bg-dark-100/90 text-forest-500 rounded backdrop-blur-sm">
                            üìñ Ebook
                        </span>
                        {% endif %}
                        {% if book.has_audiobook %}
                        <span class="px-2 py-0.5 text-xs font-medium bg-white/90 dark:bg-dark-100/90 text-burgundy-500 rounded backdrop-blur-sm">
                            üéß Audio
                        </span>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Info -->
                <div class="book-info">
                    <h3 class="book-title">{{ book.title }}</h3>
                    <p class="book-author">{{ book.author.get_display_name }}</p>
                    <div class="book-meta">
                        {% if book.average_rating > 0 %}
                        <span class="book-rating">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                            </svg>
                            {{ book.average_rating }}
                        </span>
                        {% else %}
                        <span></span>
                        {% endif %}
                        <span class="book-price">{{ book.formatted_price }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Categories Section -->
<section class="py-10 md:py-16 bg-cream dark:bg-dark-100">
    <div class="container">
        <h2 class="font-display text-2xl md:text-3xl font-bold text-gray-900 dark:text-white text-center mb-8">
            Explore by Genre
        </h2>
        
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4">
            {% for category in categories %}
            <a href="{% url 'core:category_books' category_slug=category.slug %}" 
                class="group p-4 md:p-6 bg-white dark:bg-dark-50 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-burgundy-500 dark:hover:border-burgundy-500 hover:shadow-lg transition-all text-center">
                <!-- Category Icon -->
                <div class="w-12 h-12 mx-auto mb-3 rounded-full bg-burgundy-50 dark:bg-burgundy-900/30 flex items-center justify-center group-hover:bg-burgundy-100 dark:group-hover:bg-burgundy-900/50 transition-colors">
                    {% if category.slug == 'fiction' %}
                    <span class="text-2xl">üìö</span>
                    {% elif category.slug == 'non_fiction' %}
                    <span class="text-2xl">üìñ</span>
                    {% elif category.slug == 'poetry' %}
                    <span class="text-2xl">‚ú®</span>
                    {% elif category.slug == 'drama' %}
                    <span class="text-2xl">üé≠</span>
                    {% elif category.slug == 'children' %}
                    <span class="text-2xl">üßí</span>
                    {% elif category.slug == 'history' %}
                    <span class="text-2xl">üìú</span>
                    {% elif category.slug == 'biography' %}
                    <span class="text-2xl">üë§</span>
                    {% elif category.slug == 'romance' %}
                    <span class="text-2xl">üíï</span>
                    {% elif category.slug == 'mystery' %}
                    <span class="text-2xl">üîç</span>
                    {% elif category.slug == 'science' %}
                    <span class="text-2xl">üî¨</span>
                    {% else %}
                    <span class="text-2xl">üìò</span>
                    {% endif %}
                </div>
                <h3 class="font-medium text-gray-900 dark:text-white group-hover:text-burgundy-500 transition-colors">
                    {{ category.name }}
                </h3>
                {% if category.count %}
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ category.count }} books</p>
                {% endif %}
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Why Xanula Section -->
<section class="py-12 md:py-20">
    <div class="container">
        <h2 class="font-display text-2xl md:text-3xl font-bold text-gray-900 dark:text-white text-center mb-4">
            Why Choose Xanula?
        </h2>
        <p class="text-gray-600 dark:text-gray-400 text-center max-w-xl mx-auto mb-10 md:mb-14">
            The premier platform for African literature, connecting readers with authentic stories.
        </p>
        
        <div class="grid md:grid-cols-3 gap-6 md:gap-8">
            <!-- Feature 1 -->
            <div class="p-6 md:p-8 bg-white dark:bg-dark-100 rounded-2xl border border-gray-100 dark:border-gray-800">
                <div class="w-14 h-14 rounded-xl bg-burgundy-50 dark:bg-burgundy-900/30 flex items-center justify-center mb-5">
                    <svg class="w-7 h-7 text-burgundy-500" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"/>
                    </svg>
                </div>
                <h3 class="font-display text-xl font-bold text-gray-900 dark:text-white mb-2">
                    Read & Listen
                </h3>
                <p class="text-gray-600 dark:text-gray-400">
                    Enjoy books as ebooks or audiobooks. Read on any device, anytime.
                </p>
            </div>
            
            <!-- Feature 2 -->
            <div class="p-6 md:p-8 bg-white dark:bg-dark-100 rounded-2xl border border-gray-100 dark:border-gray-800">
                <div class="w-14 h-14 rounded-xl bg-forest-50 dark:bg-forest-900/30 flex items-center justify-center mb-5">
                    <svg class="w-7 h-7 text-forest-500" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/>
                    </svg>
                </div>
                <h3 class="font-display text-xl font-bold text-gray-900 dark:text-white mb-2">
                    Support Authors
                </h3>
                <p class="text-gray-600 dark:text-gray-400">
                    Authors earn 70% of every sale. Your purchase directly supports creativity.
                </p>
            </div>
            
            <!-- Feature 3 -->
            <div class="p-6 md:p-8 bg-white dark:bg-dark-100 rounded-2xl border border-gray-100 dark:border-gray-800">
                <div class="w-14 h-14 rounded-xl bg-gold-500/20 flex items-center justify-center mb-5">
                    <svg class="w-7 h-7 text-gold-600" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"/>
                    </svg>
                </div>
                <h3 class="font-display text-xl font-bold text-gray-900 dark:text-white mb-2">
                    Easy Publishing
                </h3>
                <p class="text-gray-600 dark:text-gray-400">
                    Upload your manuscript, we handle the rest. Ebook and audiobook conversion included.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-12 md:py-20 bg-burgundy-500 dark:bg-burgundy-600">
    <div class="container text-center">
        <h2 class="font-display text-2xl md:text-4xl font-bold text-white mb-4">
            Ready to Share Your Story?
        </h2>
        <p class="text-burgundy-100 text-lg mb-8 max-w-lg mx-auto">
            Join thousands of African authors publishing on Xanula. Your voice matters.
        </p>
        {% if user.is_authenticated %}
        <a href="{% url 'core:publish_book' %}" class="btn btn-lg bg-white text-burgundy-500 hover:bg-gray-100 shadow-lg">
            Publish Your Book
        </a>
        {% else %}
        <a href="{% url 'account_signup' %}" class="btn btn-lg bg-white text-burgundy-500 hover:bg-gray-100 shadow-lg">
            Get Started Free
        </a>
        {% endif %}
    </div>
</section>

<style>
/* Hide scrollbar but allow scrolling */
.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
    display: none;
}
</style>
{% endblock %}