{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Change Password" %} - Xanula{% endblock %}

{% block content %}
<div class="container py-6 max-w-lg">
    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="font-display text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">
            {% trans "Change Password" %}
        </h1>
        <p class="mt-2 text-gray-600 dark:text-gray-400">
            {% trans "Update your account password" %}
        </p>
    </div>
    
    <!-- Card -->
    <div class="bg-white dark:bg-dark-100 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 md:p-8 shadow-sm">
        <form method="post" class="space-y-5">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-xl text-sm">
                {% for error in form.non_field_errors %}<p>{{ error }}</p>{% endfor %}
            </div>
            {% endif %}
            
            <!-- Current Password -->
            <div class="form-group">
                <label for="id_oldpassword" class="label">{% trans "Current Password" %}</label>
                <input type="password" name="oldpassword" id="id_oldpassword" required autocomplete="current-password"
                    class="input {% if form.oldpassword.errors %}border-red-500{% endif %}"
                    placeholder="{% trans 'Enter current password' %}">
                {% if form.oldpassword.errors %}<p class="mt-1 text-sm text-red-500">{{ form.oldpassword.errors.0 }}</p>{% endif %}
            </div>
            
            <!-- New Password -->
            <div class="form-group">
                <label for="id_password1" class="label">{% trans "New Password" %}</label>
                <input type="password" name="password1" id="id_password1" required autocomplete="new-password"
                    class="input {% if form.password1.errors %}border-red-500{% endif %}"
                    placeholder="{% trans 'Enter new password' %}">
                {% if form.password1.errors %}<p class="mt-1 text-sm text-red-500">{{ form.password1.errors.0 }}</p>{% endif %}
                <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">{% trans "Must be at least 8 characters" %}</p>
            </div>
            
            <!-- Confirm New Password -->
            <div class="form-group">
                <label for="id_password2" class="label">{% trans "Confirm New Password" %}</label>
                <input type="password" name="password2" id="id_password2" required autocomplete="new-password"
                    class="input {% if form.password2.errors %}border-red-500{% endif %}"
                    placeholder="{% trans 'Confirm new password' %}">
                {% if form.password2.errors %}<p class="mt-1 text-sm text-red-500">{{ form.password2.errors.0 }}</p>{% endif %}
            </div>
            
            <div class="flex flex-col sm:flex-row gap-3 pt-2">
                <button type="submit" class="btn btn-primary flex-1">{% trans "Change Password" %}</button>
                <a href="{% url 'core:user_settings' %}" class="btn btn-secondary flex-1 text-center">{% trans "Cancel" %}</a>
            </div>
        </form>
        
        <!-- Forgot Password Link -->
        <div class="mt-6 pt-6 border-t border-gray-100 dark:border-gray-700 text-center">
            <a href="{% url 'account_reset_password' %}" class="text-sm text-burgundy-500 hover:text-burgundy-600 font-medium">
                {% trans "Forgot your password?" %}
            </a>
        </div>
    </div>
</div>
{% endblock %}
